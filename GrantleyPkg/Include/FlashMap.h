//
// This file contains 'Framework Code' and is licensed as such 
// under the terms of your license agreement with Intel or your
// vendor.  This file may not be modified, except as allowed by
// additional terms of your license agreement.                 
//
/*++

  DO NOT EDIT -- file auto-generated by FlashMap utility

--*/

#ifndef _FLASH_MAP_H_
#define _FLASH_MAP_H_

//AptioV server override start: WA to avoid redefinition errors when including Token.h
#ifndef FLASH_BASE
#define FLASH_BASE                                          0xFF800000
#endif
#ifndef FLASH_SIZE
#define FLASH_SIZE                                          0x00800000
#endif
//AptioV server override end: WA to avoid redefinition errors when including Token.h

#define FLASH_REGION_FVMAIN_BASE                            0xFF800000
#define FLASH_REGION_FVMAIN_SIZE                            0x00470000
#define FLASH_REGION_FVMAIN_OFFSET                          0x00000000

#define FLASH_REGION_OEM_FV_BASE                            0xFFC70000
#define FLASH_REGION_OEM_FV_SIZE                            0x00050000
#define FLASH_REGION_OEM_FV_OFFSET                          0x00470000

#define FLASH_REGION_FLAVOR_FV_BASE                         0xFFCC0000
#define FLASH_REGION_FLAVOR_FV_SIZE                         0x00060000
#define FLASH_REGION_FLAVOR_FV_OFFSET                       0x004C0000

#define FLASH_REGION_FVWHEA_BASE                            0xFFD20000
#define FLASH_REGION_FVWHEA_SIZE                            0x00010000
#define FLASH_REGION_FVWHEA_OFFSET                          0x00520000

#define FLASH_REGION_MICROCODE_FV_BASE                      0xFFF60000
#define FLASH_REGION_MICROCODE_FV_SIZE                      0x00020000
#define FLASH_REGION_MICROCODE_FV_OFFSET                    0x00760000

#define FLASH_REGION_RUNTIME_UPDATABLE_BASE                 0xFFD30000
#define FLASH_REGION_RUNTIME_UPDATABLE_SIZE                 0x00040000
#define FLASH_REGION_RUNTIME_UPDATABLE_OFFSET               0x00530000

#define FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_VARIABLE_STORE_BASE            0xFFD30000
#define FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_VARIABLE_STORE_SIZE            0x0003C000
#define FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_VARIABLE_STORE_OFFSET          0x00530000

#define FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_EVENT_LOG_BASE       0xFFD6C000
#define FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_EVENT_LOG_SIZE       0x00002000
#define FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_EVENT_LOG_OFFSET     0x0056C000

#define FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_FTW_WORKING_BASE         0xFFD6E000
#define FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_FTW_WORKING_SIZE         0x00002000
#define FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_FTW_WORKING_OFFSET       0x0056E000

#define FLASH_REGION_NV_FTW_SPARE_BASE                      0xFFD70000
#define FLASH_REGION_NV_FTW_SPARE_SIZE                      0x00040000
#define FLASH_REGION_NV_FTW_SPARE_OFFSET                    0x00570000

// AptioV Server Override Start: Split Recover Support Not Required
/*#ifdef SPLIT_RECOVERY_FV
#define FLASH_REGION_FV_MRC_RECOVERY_BASE                   0xFFE80000
#define FLASH_REGION_FV_MRC_RECOVERY_SIZE                   0x00080000
#define FLASH_REGION_FV_MRC_RECOVERY_OFFSET                 0x00680000

#define FLASH_REGION_FV_MRC_NORMAL_BASE                     0xFFF00000
#define FLASH_REGION_FV_MRC_NORMAL_SIZE                     0x00080000
#define FLASH_REGION_FV_MRC_NORMAL_OFFSET                   0x00700000
#else
#define FLASH_REGION_FV_MRC_NORMAL_BASE                     0xFFE00000
#define FLASH_REGION_FV_MRC_NORMAL_SIZE                     0x00160000
#define FLASH_REGION_FV_MRC_NORMAL_OFFSET                   0x00600000
#endif*/

#define FLASH_REGION_FV_MRC_RECOVERY_BASE                   0xFFE80000
#define FLASH_REGION_FV_MRC_RECOVERY_SIZE                   0x00080000
#define FLASH_REGION_FV_MRC_RECOVERY_OFFSET                 0x00680000

#define FLASH_REGION_FV_MRC_NORMAL_BASE                     0xFFF00000
#define FLASH_REGION_FV_MRC_NORMAL_SIZE                     0x00080000
#define FLASH_REGION_FV_MRC_NORMAL_OFFSET                   0x00700000

// AptioV Server Override End: Split Recover Support Not Required

#ifdef BTG_FLAG
#define FLASH_REGION_BIOS_ACM_FV_HEADER_BASE                0xFFF80000
#define FLASH_REGION_BIOS_ACM_FV_HEADER_SIZE                0x00010000
#define FLASH_REGION_BIOS_ACM_FV_HEADER_OFFSET              0x00780000
#define FLASH_REGION_BIOS_ACM_BASE                          0xFFF90000
#define FLASH_REGION_BIOS_ACM_SIZE                          0x00010000
#define FLASH_REGION_BIOS_ACM_OFFSET                        0x00790000
#define FLASH_REGION_SINIT_ACM_BASE                         0xFFFA0000
#define FLASH_REGION_SINIT_ACM_SIZE                         0x00010000
#define FLASH_REGION_SINIT_ACM_OFFSET                       0x007A0000
#else
#define FLASH_REGION_BIOS_ACM_FV_HEADER_BASE                0xFFDB0000
#define FLASH_REGION_BIOS_ACM_FV_HEADER_SIZE                0x00010000
#define FLASH_REGION_BIOS_ACM_FV_HEADER_OFFSET              0x005B0000
#define FLASH_REGION_BIOS_ACM_BASE                          0xFFDC0000
#define FLASH_REGION_BIOS_ACM_SIZE                          0x00020000
#define FLASH_REGION_BIOS_ACM_OFFSET                        0x005C0000
#define FLASH_REGION_SINIT_ACM_BASE                         0xFFDE0000
#define FLASH_REGION_SINIT_ACM_SIZE                         0x00020000
#define FLASH_REGION_SINIT_ACM_OFFSET                       0x005E0000
#endif

//#define FLASH_REGION_FV_SECPEI_RECOVERY_BASE                0xFFF80000
//#define FLASH_REGION_FV_SECPEI_RECOVERY_SIZE                0x00040000
//#define FLASH_REGION_FV_SECPEI_REVOERY_OFFSET               0x00380000

//
// swap: SECPEI presents same base and size in Normal
// or Recovery boot mode
//
#ifdef BTG_FLAG
#define FLASH_REGION_FV_SECPEI_NORMAL_BASE                  0xFFFB0000
#define FLASH_REGION_FV_SECPEI_NORMAL_SIZE                  0x00050000
#define FLASH_REGION_FV_SECPEI_NORMAL_OFFSET                0x007B0000
#else
#define FLASH_REGION_FV_SECPEI_NORMAL_BASE                  0xFFF80000
#define FLASH_REGION_FV_SECPEI_NORMAL_SIZE                  0x00080000
#define FLASH_REGION_FV_SECPEI_NORMAL_OFFSET                0x00780000
#endif

#define FLASH_REGION_FV_SECPEI_BASE                         FLASH_REGION_FV_SECPEI_NORMAL_BASE
#define FLASH_REGION_FV_SECPEI_SIZE                         FLASH_REGION_FV_SECPEI_NORMAL_SIZE
#define FLASH_REGION_FV_SECPEI_OFFSET                       FLASH_REGION_FV_SECPEI_NORMAL_OFFSET

#ifdef DE_SKU

#define EFI_FLASH_AREA_DATA_DEFINITION \
  /* FVMAIN region */\
  {\
    FLASH_REGION_FVMAIN_BASE,\
    FLASH_REGION_FVMAIN_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_MAIN_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* OEM_FV region */\
  {\
    FLASH_REGION_OEM_FV_BASE,\
    FLASH_REGION_OEM_FV_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_MAIN_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* FLAVOR_FV region */\
  {\
    FLASH_REGION_FLAVOR_FV_BASE,\
    FLASH_REGION_FLAVOR_FV_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_MAIN_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* FVWHEA region */\
  {\
    FLASH_REGION_FVWHEA_BASE,\
    FLASH_REGION_FVWHEA_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_MAIN_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* MICROCODE_FV region */\
  {\
    FLASH_REGION_MICROCODE_FV_BASE,\
    FLASH_REGION_MICROCODE_FV_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_GUID_DEFINED,\
    0, 0, 0,\
    EFI_SYSTEM_NV_DATA_HOB_GUID, \
  },\
  /* RUNTIME_UPDATABLE region */\
  {\
    FLASH_REGION_RUNTIME_UPDATABLE_BASE,\
    FLASH_REGION_RUNTIME_UPDATABLE_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_GUID_DEFINED,\
    0, 0, 0,\
    EFI_SYSTEM_NV_DATA_HOB_GUID, \
  },\
  /* NV_FTW_SPARE region */\
  {\
    FLASH_REGION_NV_FTW_SPARE_BASE,\
    FLASH_REGION_NV_FTW_SPARE_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_FTW_BACKUP,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* BIOS_ACM_FV_HEADER region */\
   {\
	 FLASH_REGION_BIOS_ACM_FV_HEADER_BASE,\
	 FLASH_REGION_BIOS_ACM_FV_HEADER_SIZE,\
	 EFI_FLASH_AREA_SUBFV | EFI_FLASH_AREA_MEMMAPPED_FV,\
	 EFI_FLASH_AREA_UNUSED,\
	 0, 0, 0,\
	 { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
   },\
  /* BIOS_ACM region */\
  {\
    FLASH_REGION_BIOS_ACM_BASE,\
    FLASH_REGION_BIOS_ACM_SIZE,\
    EFI_FLASH_AREA_SUBFV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_UNUSED,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* SINIT_ACM region */\
  {\
    FLASH_REGION_SINIT_ACM_BASE,\
    FLASH_REGION_SINIT_ACM_SIZE,\
    EFI_FLASH_AREA_SUBFV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_UNUSED,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
/*#ifdef SPLIT_RECOVERY_FV*/ \
  /* FV_MRC{Normal,Recovery} region: need to be updated according to Normal or Recovery mode, now we make a place holder */\
  {\
    FLASH_REGION_FV_MRC_NORMAL_BASE,\
    FLASH_REGION_FV_MRC_NORMAL_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_RECOVERY_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
/*#endif*/ \
  /* FV_SECPEI region */\
  {\
    FLASH_REGION_FV_SECPEI_BASE,\
    FLASH_REGION_FV_SECPEI_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_RECOVERY_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\

#else

#define EFI_FLASH_AREA_DATA_DEFINITION \
  /* FVMAIN region */\
  {\
    FLASH_REGION_FVMAIN_BASE,\
    FLASH_REGION_FVMAIN_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_MAIN_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* OEM_FV region */\
  {\
    FLASH_REGION_OEM_FV_BASE,\
    FLASH_REGION_OEM_FV_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_MAIN_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* FLAVOR_FV region */\
  {\
    FLASH_REGION_FLAVOR_FV_BASE,\
    FLASH_REGION_FLAVOR_FV_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_MAIN_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* FVWHEA region */\
  {\
    FLASH_REGION_FVWHEA_BASE,\
    FLASH_REGION_FVWHEA_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_MAIN_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* MICROCODE_FV region */\
  {\
    FLASH_REGION_MICROCODE_FV_BASE,\
    FLASH_REGION_MICROCODE_FV_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_GUID_DEFINED,\
    0, 0, 0,\
    EFI_SYSTEM_NV_DATA_HOB_GUID, \
  },\
  /* RUNTIME_UPDATABLE region */\
  {\
    FLASH_REGION_RUNTIME_UPDATABLE_BASE,\
    FLASH_REGION_RUNTIME_UPDATABLE_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_GUID_DEFINED,\
    0, 0, 0,\
    EFI_SYSTEM_NV_DATA_HOB_GUID, \
  },\
  /* NV_FTW_SPARE region */\
  {\
    FLASH_REGION_NV_FTW_SPARE_BASE,\
    FLASH_REGION_NV_FTW_SPARE_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_FTW_BACKUP,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* BIOS_ACM_FV_HEADER region */\
  {\
    FLASH_REGION_BIOS_ACM_FV_HEADER_BASE,\
    FLASH_REGION_BIOS_ACM_FV_HEADER_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_GUID_DEFINED,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* BIOS_ACM region */\
  {\
    FLASH_REGION_BIOS_ACM_BASE,\
    FLASH_REGION_BIOS_ACM_SIZE,\
    EFI_FLASH_AREA_SUBFV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_UNUSED,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  /* SINIT_ACM region */\
  {\
    FLASH_REGION_SINIT_ACM_BASE,\
    FLASH_REGION_SINIT_ACM_SIZE,\
    EFI_FLASH_AREA_SUBFV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_UNUSED,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
/*#ifdef SPLIT_RECOVERY_FV*/ \
  /* FV_MRC{Normal,Recovery} region: need to be updated according to Normal or Recovery mode, now we make a place holder */\
  {\
    FLASH_REGION_FV_MRC_NORMAL_BASE,\
    FLASH_REGION_FV_MRC_NORMAL_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_RECOVERY_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
/*#endif*/ \
  /* FV_SECPEI region */\
  {\
    FLASH_REGION_FV_SECPEI_BASE,\
    FLASH_REGION_FV_SECPEI_SIZE,\
    EFI_FLASH_AREA_FV | EFI_FLASH_AREA_MEMMAPPED_FV,\
    EFI_FLASH_AREA_RECOVERY_BIOS,\
    0, 0, 0,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
  },\
  
#endif


//
// EFI_HOB_FLASH_MAP_ENTRY_TYPE definition
//
#define EFI_HOB_FLASH_MAP_ENTRY_TYPE_DATA_DEFINITION \
  /* RUNTIME_UPDATABLE.NV_VARIABLE_STORE Subregion */\
  {\
    EFI_HOB_TYPE_GUID_EXTENSION,\
    sizeof (EFI_HOB_FLASH_MAP_ENTRY_TYPE ),\
    0,\
    EFI_FLASH_MAP_HOB_GUID, \
    0, 0, 0,\
    EFI_FLASH_AREA_EFI_VARIABLES,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
    1,\
    {\
      EFI_FLASH_AREA_SUBFV | EFI_FLASH_AREA_MEMMAPPED_FV,\
      0,\
      FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_VARIABLE_STORE_BASE,\
      FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_VARIABLE_STORE_SIZE,\
      { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
    },\
  }, \
  /* RUNTIME_UPDATABLE.NV_FTW_WORKING Subregion */\
  {\
    EFI_HOB_TYPE_GUID_EXTENSION,\
    sizeof (EFI_HOB_FLASH_MAP_ENTRY_TYPE ),\
    0,\
    EFI_FLASH_MAP_HOB_GUID, \
    0, 0, 0,\
    EFI_FLASH_AREA_FTW_STATE,\
    { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
    1,\
    {\
      EFI_FLASH_AREA_SUBFV | EFI_FLASH_AREA_MEMMAPPED_FV,\
      0,\
      FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_FTW_WORKING_BASE,\
      FLASH_REGION_RUNTIME_UPDATABLE_SUBREGION_NV_FTW_WORKING_SIZE,\
      { 0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },\
    },\
  },

#endif // #ifndef _FLASH_MAP_H_

